<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lead authors: Seow Ryan, Jensie Low   Collaborator: Derek Yuen   Corresponding author: Dr Linda Sellou">

<title>Theme 3: Water &amp; Oceans</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Chapter3_files/libs/clipboard/clipboard.min.js"></script>
<script src="Chapter3_files/libs/quarto-html/quarto.js"></script>
<script src="Chapter3_files/libs/quarto-html/popper.min.js"></script>
<script src="Chapter3_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Chapter3_files/libs/quarto-html/anchor.min.js"></script>
<link href="Chapter3_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Chapter3_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Chapter3_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Chapter3_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Chapter3_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">1 | OVERVIEW</a></li>
  <li><a href="#sdg-14-life-below-water" id="toc-sdg-14-life-below-water" class="nav-link" data-scroll-target="#sdg-14-life-below-water">2 | SDG 14: LIFE BELOW WATER</a></li>
  <li><a href="#chemical-equilibrium" id="toc-chemical-equilibrium" class="nav-link" data-scroll-target="#chemical-equilibrium">3 | CHEMICAL EQUILIBRIUM</a></li>
  <li><a href="#equilibrium-systems-in-oceans" id="toc-equilibrium-systems-in-oceans" class="nav-link" data-scroll-target="#equilibrium-systems-in-oceans">4 | EQUILIBRIUM SYSTEMS IN OCEANS</a></li>
  <li><a href="#deliverables" id="toc-deliverables" class="nav-link" data-scroll-target="#deliverables">5 | DELIVERABLES</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">6 | REFERENCES</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading">7 | FURTHER READING</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Theme 3: Water &amp; Oceans</h1>
<p class="subtitle lead">Importance of Oceans</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lead authors: Seow Ryan, Jensie Low <br> Collaborator: Derek Yuen <br> Corresponding author: Dr Linda Sellou </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">1 | OVERVIEW</h2>
<section id="learning-objectives" class="level4">
<h4 class="anchored" data-anchor-id="learning-objectives">LEARNING OBJECTIVES</h4>
<ul>
<li>Able to discuss about marine resources and the importance of protecting ocean systems</li>
<li>Understand equilibrium systems in the ocean (carbon dioxide)</li>
<li>Predict how factors affect these systems and potentially contribute to global warming</li>
<li>Discuss the effects of ocean acidification</li>
</ul>
</section>
</section>
<section id="sdg-14-life-below-water" class="level2">
<h2 class="anchored" data-anchor-id="sdg-14-life-below-water">2 | SDG 14: LIFE BELOW WATER</h2>
<p style="text-align: justify;">
<a href="https://sdgs.un.org/goals/goal14">Goal 14</a> of the United National Sustainable Development Goals is to conserve and sustainably use the oceans, seas, and marine resources for sustainable development. We will look at why oceans are so important and what processes affect their stability.
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://sdgs.un.org/sites/default/files/2022-07/SDG%20Report%202022_Goal%2014%20infographic.png" title="Figure 1. SDG 14: Life Below Water 2022 Report, retrieved from UNSD" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption"><strong>Figure 1.</strong> SDG 14: Life Below Water 2022 Report, retrieved from UNSD</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p><strong>Discussion corner</strong></p>
<p style="text-align: justify;">
What are some resources derived from the <strong>oceans / seas</strong>?
</p>
</blockquote>
</section>
<section id="chemical-equilibrium" class="level2">
<h2 class="anchored" data-anchor-id="chemical-equilibrium">3 | CHEMICAL EQUILIBRIUM</h2>
<section id="what-is-chemical-equilibrium" class="level4">
<h4 class="anchored" data-anchor-id="what-is-chemical-equilibrium">3.1 WHAT IS CHEMICAL EQUILIBRIUM?</h4>
<p style="text-align: justify;">
<strong>Le Châtelier’s Principle (LCP)</strong> states that <em>if a system at dynamic equilibrium is subject to change, the position of equilibrium shifts to counteract the change, so as to re-establish the state of equilibrium.</em> In this section, we will explore the concept of chemical equilibrium.
</p>
<p style="text-align: justify;">
For those who are already familiar with this topic, take this as a quick refresher and help your peers!
</p>
<blockquote class="blockquote">
<p><strong>Discussion corner</strong></p>
<p style="text-align: justify;">
What are some different examples of equilibrium in other fields?
</p>
</blockquote>
</section>
<section id="what-happens-if-we-apply-stress-to-a-system-at-equilibrium" class="level4">
<h4 class="anchored" data-anchor-id="what-happens-if-we-apply-stress-to-a-system-at-equilibrium">3.2 WHAT HAPPENS IF WE APPLY STRESS TO A SYSTEM AT EQUILIBRIUM?</h4>
<p style="text-align: justify;">
In this section, we explore the tools that we have to assess changes in an equilibrium system. These tools will be useful in predicting changes to a system when a stress is applied.
</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example : Haemoglobin
</div>
</div>
<div class="callout-body-container callout-body">
<p style="text-align: justify;">
<a href="https://ib.bioninja.com.au/options/option-d-human-physiology/d6-transport-of-respiratory/oxygen-dissociation-curve.html"><strong>Haemoglobin (Hb)</strong></a> is a globular protein containing four subunits, increasing the overall capacity for oxygen transport. Each Hb can bind up to four oxygen molecules as shown in <strong>Equation 1</strong>.
</p>
<p><span class="math display">\[\begin{equation}
\tag{1}
Hb (aq) + 4 O_2 (aq) ⇌ Hb(O_2)_4 (aq)
\end{equation}\]</span></p>
<p style="text-align: justify;">
<strong>Carbon monoxide</strong> poisoning is extremely dangerous because carbon monoxide binds <strong>irreversibly</strong> to the haemoglobin subunits to form <strong>carboxyhaemoglobin</strong>.
</p>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href=""><strong>Exercise 1</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href=""><strong>Model Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p style="text-align: justify;">
Explain qualitatively, using LCP, how the irreversible change to carboxyhaemoglobin disrupts the equilibrium in <strong>Equation 1</strong>.
</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p style="text-align: justify;">
When carboxyhaemoglobin is formed, the [Hb] present decreases and the position of equilibrium (POE) of (1) shifts to the left to increase the [Hb]. Less haemoglobin is able to transport oxygen to organs.
</p>
</div>
</div>
</div>
<p style="text-align: justify;">
A quantitative treatment is done by introducing the concept of an equilibrium constant, <em>K</em>, which evaluates the ratio of the products to the reactants at dynamic equilibrium at a particular temperature.
</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href=""><strong>Exercise 2</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href=""><strong>Model Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p style="text-align: justify;">
Write out the <em>K</em> expression for <strong>Equation 1</strong> and calculate its value given that when the concentration of O<span class="math inline">\(_2\)</span> is 7.6 <span class="math inline">\(\mu\)</span>M, the concentrations of Hb and Hb(O<span class="math inline">\(_2\)</span>)<span class="math inline">\(_4\)</span> are equal.
</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p><span class="math display">\[\begin{equation}
K = \frac{a_{Hb(O_2)_4}}{a_{Hb} a_{O_2}{^4}} ≈ \frac{[Hb(O_2)_4]}{[Hb][O_2]^4} = \frac{1}{(7.6 * 10^{-6})^4} = 3.00 * 10^{20}
\end{equation}\]</span></p>
</div>
</div>
</div>
</section>
</section>
<section id="equilibrium-systems-in-oceans" class="level2">
<h2 class="anchored" data-anchor-id="equilibrium-systems-in-oceans">4 | EQUILIBRIUM SYSTEMS IN OCEANS</h2>
<p style="text-align: justify;">
Dry atmospheric air has an average composition of 78% nitrogen gas, 21% oxygen gas, 0.04% carbon dioxide gas, 0.9% argon, and the remainder consist of other gases such as hydrogen and methane. In this section, we look at how various phases interact with one another, contributing to the complex equilibria that exists in the oceans. From here, we can then predict the effects of climate change and how disruptions affect the oceanic equilibria and the cumulative effect on the planet itself.
</p>
<p style="text-align: justify;">
In the following sections, we will be looking at solubility, the maximum amount of solute that can be dissolved in a solvent at a particular temperature and pressure. This relates to gaseous and solid solubility before we look back at its applications in the carbonate cycle chemistry in oceans.
</p>
<section id="solubility-of-gases" class="level4">
<h4 class="anchored" data-anchor-id="solubility-of-gases">4.1 SOLUBILITY OF GASES</h4>
<p style="text-align: justify;">
<strong>Solubility</strong> is the maximum amount of solute that can be dissolved in a solvent at a particular temperature and pressure and is usually reported in molarity (mol/L).
</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example : Effect Of temperature on dissolved oxygen content
</div>
</div>
<div class="callout-body-container callout-body">
<p style="text-align: justify;">
Dissolved oxygen is the free oxygen, O<span class="math inline">\(_2\)</span> (aq), present in seawater that influences the quality of life of the aquatic organisms. Aquatic organisms use dissolved oxygen for respiration, and microbes use it in the decomposition of organic material at the seabed.
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Chapter3Media\Figure2.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption"><strong>Figure 2:</strong> Graph of Dissolved Oxygen against Temperature</figcaption>
</figure>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href=""><strong>Exercise 3</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href=""><strong>Model Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p style="text-align: justify;">
Write the equation for the dissolution of oxygen and its associated <em>K</em> expression.
</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p><span class="math display">\[\begin{equation}
O_2 (g) ⇌  O_2 (aq)  
\end{equation}\]</span> <span class="math display">\[\begin{equation}
K = \frac{a_{O_2 (aq)} }{a_{O_2 (g)} }
\end{equation}\]</span></p>
</div>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Discussion corner</strong></p>
<p style="text-align: justify;">
What can be inferred about the energetics of the dissolution of oxygen in water (<strong>Figure 2</strong>)? As a result, how does global warming affect marine life?
</p>
</blockquote>
</section>
<section id="solubility-of-solids" class="level4">
<h4 class="anchored" data-anchor-id="solubility-of-solids">4.2 SOLUBILITY OF SOLIDS</h4>
<p style="text-align: justify;">
Insoluble is a loose adjective to describe salts that precipitate or do not dissolve. However, let’s consider some examples. Sugar is readily soluble, but there is a limit to how much you can add to a cup of tea before it no longer dissolves. Can we then say that sugar is insoluble ? In this case, the “undissolved” sugar is because the cup of tea has already reached its saturation point and no more sugar and dissolve in it anymore. To dissolve more, you can either (1) add more tea (increase volume), or (2) increase the temperature.
</p>
<p style="text-align: justify;">
Most salts that we label as insoluble should be termed sparingly soluble because they exist in an equilibrium with the solvent system. This is known as the solubility equilibrium.
</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example : Limewater test for carbon dioxide
</div>
</div>
<div class="callout-body-container callout-body">
<p style="text-align: justify;">
The common qualitative analysis test for carbon dioxide gas is to bubble a sample in limewater. A white precipitate of calcium carbonate, CaCO<span class="math inline">\(_3\)</span>, is produced. The reaction is as follows:
</p>
<p><span class="math display">\[\begin{equation}
\tag{2}
CO_2 (aq) + Ca(OH)_2 (aq) → CaCO_3 (s) + H_2O (l)
\end{equation}\]</span></p>
<p style="text-align: justify;">
Limewater contains a <em>saturated solution</em> of calcium hydroxide, a sparingly soluble salt.
</p>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Discussion corner</strong></p>
<p style="text-align: justify;">
By writing the equilibria for carbon dioxide, calcium hydroxide, and calcium carbonate, predict what happens when carbon dioxide continues to be bubbled into limewater after the formation of the white precipitate.
</p>
</blockquote>
</section>
<section id="effect-of-carbon-emissions-in-ocean-chemistry" class="level4">
<h4 class="anchored" data-anchor-id="effect-of-carbon-emissions-in-ocean-chemistry">4.3 Effect of carbon emissions in ocean chemistry</h4>
<p style="text-align: justify;">
Do you ever recall getting told off for blowing bubbles using a straw into your beverage? Theoretically, what that does is at a sufficient concentration, carbonic acid is produced. This occurs when carbon dioxide dissolves in water. The arrow-pushing mechanism is as follows.
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Chapter3Media\Figure3.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption"><strong>Figure 3:</strong> Mechanism for the formation of carbonic acid</figcaption>
</figure>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href=""><strong>Exercise 4</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href=""><strong>Model Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p style="text-align: justify;">
Why does the water molecule readily form a bond with carbon dioxide?
</p>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p style="text-align: justify;">
The two electronegative oxygen atoms withdraws electron density away from the central C, making it <span class="math inline">\(\delta\)</span>+ and susceptible to nucleophilic attack from the oxygen.
</p>
</div>
</div>
</div>
<p>When carbon dioxide dissolves in water, four equilibrium equations can be set up:</p>
<ol type="1">
<li>Dissolution of gaseous carbon dioxide to form aqueous carbon dioxide<br>
</li>
<li>Acid-base reaction between carbon dioxide and water to form carbonic acid (H<span class="math inline">\(_2\)</span>CO<span class="math inline">\(_3\)</span>)<br>
</li>
<li>Dissociation of carbonic acid to form bicarbonate (HCO<span class="math inline">\(_3^-\)</span>) and hydrogen ions<br>
</li>
<li>Dissociation of bicarbonate ions to form carbonate and hydrogen ions</li>
</ol>
<blockquote class="blockquote">
<p><strong>Discussion corner</strong></p>
<p style="text-align: justify;">
Write down the associated chemical equations and their respective <em>K</em> expressions.
</p>
</blockquote>
<p style="text-align: justify;">
You will be performing an experiment on ocean acidification during an IS session and the equations above will be relevant to your experiment. Remember to plan your experiment and support your responses and reflections using content from this handout.
</p>
</section>
</section>
<section id="deliverables" class="level2">
<h2 class="anchored" data-anchor-id="deliverables">5 | DELIVERABLES</h2>
<p style="text-align: justify;">
In this first part of this theme, the basic science that you should have taken away is:
</p>
<ul>
<li>Application of Le Châtelier’s Principle to predict how equilibrium systems change</li>
<li>Basic understanding of the chemical basis of Earth’s processes</li>
</ul>
<p style="text-align: justify;">
The content in this handout will be sufficient to <strong>plan</strong> and <strong>understand</strong> what needs to be done for the <strong>first experiment</strong> on ocean acidification.
</p>
<section id="lab-worksheet" class="level4">
<h4 class="anchored" data-anchor-id="lab-worksheet">Lab Worksheet</h4>
<p style="text-align: justify;">
You will find a copy of the lab worksheet in the Google Classroom. You are required to:
</p>
<ul>
<li>Read the background and general procedure</li>
<li>Plan your experiment <strong>with your group BEFORE your lab session</strong> (discuss with mentor)</li>
<li>Submit a completed lab worksheet <strong>WITHIN ONE WEEK AFTER your lab session</strong></li>
<li>Refer to lab worksheet for more detailed instructions</li>
</ul>
</section>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">6 | REFERENCES</h2>
<p><em>Data used to plot Figure 2 in Python</em> <a href="http://butane.chem.uiuc.edu/pshapley/GenChem1/L23/2.html">here</a></p>
</section>
<section id="further-reading" class="level2">
<h2 class="anchored" data-anchor-id="further-reading">7 | FURTHER READING</h2>
<p style="text-align: justify;">
You may look to these sources for inspiration regarding your individual presentation or to supplement your own learning.
</p>
<ul>
<li><a href="https://www.acs.org/content/acs/en/climatescience/oceansicerocks/oceanchemistry.html"><strong>Ocean chemistry</strong></a></li>
<li><strong>Ocean acidification</strong> [Nandi’s Individual Presentation]<br>
</li>
<li><a href="https://doi.org/10.2138/gselements.15.4.235"><strong>Chemical Weathering</strong></a><br>
</li>
<li><a href="https://education.nationalgeographic.org/resource/rock-cycle"><strong>How are rocks formed?</strong></a> [magma differentiation, crystallisation, rock cycles]<br>
</li>
<li><a href="https://www.nature.com/articles/439675a"><strong>How do volcanoes play a part in climate change and oceans?</strong></a> [plate tectonics, volcanism]<br>
</li>
<li><a href="https://serc.carleton.edu/eslabs/carbon/6a.html"><strong>How do biological processes drive geological cycles?</strong></a> [oceanic biological pump]</li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>